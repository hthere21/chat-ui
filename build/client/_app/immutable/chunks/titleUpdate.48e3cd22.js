import{b as s,w as n}from"./singletons.7e5ab6ef.js";import{e,E as c}from"./cookiesAreEnabled.7d4925e8.js";import{p as l}from"./stores.7cb53fc7.js";import{Y as h}from"./scheduler.6a9d17f6.js";async function o(r,t){navigator.share?navigator.share({url:r,title:t}):await navigator.clipboard.writeText(r)}function f(r,t){return`${`${r.origin}${s}`}/r/${t}`}async function m(r,t){try{if(r.length===7){const a=h(l).url;await o(f(a,r),t)}else{const a=await fetch(`${s}/conversation/${r}/share`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok){e.set("Error while sharing conversation, try again."),console.error("Error while sharing conversation: "+await a.text());return}const{url:i}=await a.json();await o(i,t)}}catch(a){e.set(c.default),console.error(a)}}const v=n(!1),E=n(null);export{v as i,m as s,E as t};
