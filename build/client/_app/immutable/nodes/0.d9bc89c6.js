import{s as oe,z as ye,A as re,H as nt,B as ne,b as C,C as lt,f as m,D as Te,i as $,n as le,E as xe,h as i,j as p,O as at,e as y,a as B,t as q,c as k,g as j,d as J,K as de,r as ie,k as _e,P as st,Q as it,R as ot,w as Ne,l as se,I as ut,m as Se,q as me,y as Le,G as Ee,M as ft,F as ke,a1 as De,T as gt,W as pt,x as ce,J as _t,o as vt,S as bt}from"../chunks/scheduler.6a9d17f6.js";import{S as ue,i as fe,c as W,a as Q,m as X,t as L,d as H,e as Y,g as he,f as ge,h as Oe}from"../chunks/index.f8ec6462.js";import{g as Pe,b as Be}from"../chunks/navigation.bcbcd3d3.js";import{n as yt,p as $e}from"../chunks/stores.c2158893.js";import{b as V}from"../chunks/singletons.dcb5d507.js";import{P as pe,c as kt,d as Ae,e as je,a as ae}from"../chunks/public.bedf1950.js";import{i as wt,s as He,t as ze}from"../chunks/titleUpdate.44e7e95f.js";import{u as Et,c as $t,U as Ve}from"../chunks/settings.053bb39b.js";import{L as ct,c as Tt,e as be}from"../chunks/cookiesAreEnabled.35a078a4.js";import{C as dt}from"../chunks/close.5676f196.js";import{g as mt}from"../chunks/spread.84d39b6c.js";import{e as Ce}from"../chunks/each.81050b20.js";import{C as xt}from"../chunks/checkmark.c1ac77be.js";import{T as Ct}from"../chunks/trash-can.c73da904.js";import{f as Ue}from"../chunks/index.e2b52378.js";import{M as Nt}from"../chunks/Modal.7c732ae4.js";const At=!0,Mt=At;function It(n){let e,r,t='<path fill="currentColor" d="M6 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6z"/>',l=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],a={};for(let s=0;s<l.length;s+=1)a=ye(a,l[s]);return{c(){e=re("svg"),r=new nt(!0),this.h()},l(s){e=ne(s,"svg",{viewBox:!0,width:!0,height:!0});var o=C(e);r=lt(o,!0),o.forEach(m),this.h()},h(){r.a=null,Te(e,a)},m(s,o){$(s,e,o),r.m(t,e)},p(s,[o]){Te(e,a=mt(l,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:le,o:le,d(s){s&&m(e)}}}function St(n,e,r){return n.$$set=t=>{r(0,e=ye(ye({},e),xe(t)))},e=xe(e),[e]}class Lt extends ue{constructor(e){super(),fe(this,e,St,It,oe,{})}}function Dt(n){let e,r;return{c(){e=re("svg"),r=re("path"),this.h()},l(t){e=ne(t,"svg",{xmlns:!0,class:!0,width:!0,height:!0,fill:!0,viewBox:!0});var l=C(e);r=ne(l,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),C(r).forEach(m),l.forEach(m),this.h()},h(){i(r,"fill","currentColor"),i(r,"fill-rule","evenodd"),i(r,"d","M3.143 20.286h4.286v2.142H3.143A2.143 2.143 0 0 1 1 20.287V3.143A2.143 2.143 0 0 1 3.143 1h17.143a2.143 2.143 0 0 1 2.142 2.143v4.286h-2.142V3.143H3.143v17.143Zm9.643-12.857v3.214H16v2.143h-3.214V16h-2.143v-3.214H7.429v-2.143h3.214V7.429h2.143Zm14.185 2.639 3.533 3.532a1.7 1.7 0 0 1 0 2.4L15.5 31H9.57v-5.928l15-15.004a1.7 1.7 0 0 1 2.4 0Zm-15.257 18.79h2.897l10.116-10.116-2.899-2.897L11.714 25.96v2.897ZM23.346 14.33l2.897 2.897 2.429-2.43-2.897-2.896-2.43 2.429Z"),i(r,"clip-rule","evenodd"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class",n[0]),i(e,"width","1em"),i(e,"height","1em"),i(e,"fill","none"),i(e,"viewBox","0 0 32 32")},m(t,l){$(t,e,l),p(e,r)},p(t,[l]){l&1&&i(e,"class",t[0])},i:le,o:le,d(t){t&&m(e)}}}function Ot(n,e,r){let{classNames:t=""}=e;return n.$$set=l=>{"classNames"in l&&r(0,t=l.classNames)},[t]}class Pt extends ue{constructor(e){super(),fe(this,e,Ot,Dt,oe,{classNames:0})}}function Bt(n){let e,r,t,l,a,s,o,f,d,u,h,c,g,b,D,_,w,z,E;t=new Lt({}),d=new Pt({}),b=new dt({});const N=n[8].default,S=at(N,n,n[7],null);return{c(){e=y("nav"),r=y("button"),W(t.$$.fragment),l=B(),a=y("span"),s=q(n[0]),o=B(),f=y("a"),W(d.$$.fragment),u=B(),h=y("nav"),c=y("div"),g=y("button"),W(b.$$.fragment),D=B(),S&&S.c(),this.h()},l(A){e=k(A,"NAV",{class:!0});var O=C(e);r=k(O,"BUTTON",{type:!0,class:!0,"aria-label":!0});var R=C(r);Q(t.$$.fragment,R),R.forEach(m),l=j(O),a=k(O,"SPAN",{class:!0});var v=C(a);s=J(v,n[0]),v.forEach(m),o=j(O),f=k(O,"A",{href:!0,class:!0});var P=C(f);Q(d.$$.fragment,P),P.forEach(m),O.forEach(m),u=j(A),h=k(A,"NAV",{class:!0});var F=C(h);c=k(F,"DIV",{class:!0});var M=C(c);g=k(M,"BUTTON",{type:!0,class:!0,"aria-label":!0});var T=C(g);Q(b.$$.fragment,T),T.forEach(m),M.forEach(m),D=j(F),S&&S.l(F),F.forEach(m),this.h()},h(){i(r,"type","button"),i(r,"class","-ml-3 flex size-12 shrink-0 items-center justify-center text-lg"),i(r,"aria-label","Open menu"),i(a,"class","truncate px-4"),i(f,"href",V+"/"),i(f,"class","-mr-3 flex size-12 shrink-0 items-center justify-center text-lg"),de(f,"invisible",!n[4].params.id),i(e,"class","flex h-12 items-center justify-between border-b bg-gray-50 px-3 md:hidden dark:border-gray-800 dark:bg-gray-800/70"),i(g,"type","button"),i(g,"class","-mr-3 ml-auto flex size-12 items-center justify-center text-lg"),i(g,"aria-label","Close menu"),i(c,"class","flex h-12 items-center px-4"),i(h,"class",_="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(n[1]?"block":"hidden"))},m(A,O){$(A,e,O),p(e,r),X(t,r,null),n[10](r),p(e,l),p(e,a),p(a,s),p(e,o),p(e,f),X(d,f,null),$(A,u,O),$(A,h,O),p(h,c),p(c,g),X(b,g,null),n[12](g),p(h,D),S&&S.m(h,null),w=!0,z||(E=[ie(r,"click",n[9]),ie(g,"click",n[11])],z=!0)},p(A,[O]){(!w||O&1)&&_e(s,A[0]),(!w||O&16)&&de(f,"invisible",!A[4].params.id),S&&S.p&&(!w||O&128)&&st(S,N,A,A[7],w?ot(N,A[7],O,null):it(A[7]),null),(!w||O&2&&_!==(_="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(A[1]?"block":"hidden")))&&i(h,"class",_)},i(A){w||(L(t.$$.fragment,A),L(d.$$.fragment,A),L(b.$$.fragment,A),L(S,A),w=!0)},o(A){H(t.$$.fragment,A),H(d.$$.fragment,A),H(b.$$.fragment,A),H(S,A),w=!1},d(A){A&&(m(e),m(u),m(h)),Y(t),n[10](null),Y(d),Y(b),n[12](null),S&&S.d(A),z=!1,Ne(E)}}}function jt(n,e,r){let t,l;se(n,yt,_=>r(6,t=_)),se(n,$e,_=>r(4,l=_));let{$$slots:a={},$$scope:s}=e,{isOpen:o=!1}=e,{title:f}=e,d,u;const h=ut(),c=()=>h("toggle",!0);function g(_){Se[_?"unshift":"push"](()=>{u=_,r(3,u)})}const b=()=>h("toggle",!1);function D(_){Se[_?"unshift":"push"](()=>{d=_,r(2,d)})}return n.$$set=_=>{"isOpen"in _&&r(1,o=_.isOpen),"title"in _&&r(0,f=_.title),"$$scope"in _&&r(7,s=_.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(0,f=f??"New Chat"),n.$$.dirty&64&&t&&h("toggle",!1),n.$$.dirty&14&&(o&&d?d.focus():!o&&Mt&&document.activeElement===d&&u.focus())},[f,o,d,u,l,h,t,s,a,c,g,b,D]}class Ht extends ue{constructor(e){super(),fe(this,e,jt,Bt,oe,{isOpen:1,title:0})}}function zt(){const{classList:n}=document.querySelector("html"),e=document.querySelector('meta[name="theme-color"]');n.contains("dark")?(n.remove("dark"),e.setAttribute("content","rgb(249, 250, 251)"),localStorage.theme="light"):(n.add("dark"),e.setAttribute("content","rgb(26, 36, 50)"),localStorage.theme="dark")}function Vt(n){let e,r,t='<path fill="currentColor" d="M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z"/>',l=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],a={};for(let s=0;s<l.length;s+=1)a=ye(a,l[s]);return{c(){e=re("svg"),r=new nt(!0),this.h()},l(s){e=ne(s,"svg",{viewBox:!0,width:!0,height:!0});var o=C(e);r=lt(o,!0),o.forEach(m),this.h()},h(){r.a=null,Te(e,a)},m(s,o){$(s,e,o),r.m(t,e)},p(s,[o]){Te(e,a=mt(l,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},o&1&&s[0]]))},i:le,o:le,d(s){s&&m(e)}}}function Ut(n,e,r){return n.$$set=t=>{r(0,e=ye(ye({},e),xe(t)))},e=xe(e),[e]}class Zt extends ue{constructor(e){super(),fe(this,e,Ut,Vt,oe,{})}}function Ze(n){let e,r="Delete";return{c(){e=y("span"),e.textContent=r,this.h()},l(t){e=k(t,"SPAN",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-fgoosm"&&(e.textContent=r),this.h()},h(){i(e,"class","mr-1 font-semibold")},m(t,l){$(t,e,l)},d(t){t&&m(e)}}}function Rt(n){let e=n[0].title+"",r;return{c(){r=q(e)},l(t){r=J(t,e)},m(t,l){$(t,r,l)},p(t,l){l&1&&e!==(e=t[0].title+"")&&_e(r,e)},d(t){t&&m(r)}}}function Gt(n){let e,r,t=n[0].title.replace(/\p{Emoji}/gu,"")+"",l;return{c(){e=y("div"),r=B(),l=q(t),this.h()},l(a){e=k(a,"DIV",{class:!0}),C(e).forEach(m),r=j(a),l=J(a,t),this.h()},h(){i(e,"class","mr-1.5 flex size-4 flex-none items-center justify-center rounded-full bg-gray-300 text-xs font-bold uppercase text-gray-500")},m(a,s){$(a,e,s),$(a,r,s),$(a,l,s)},p(a,s){s&1&&t!==(t=a[0].title.replace(/\p{Emoji}/gu,"")+"")&&_e(l,t)},d(a){a&&(m(e),m(r),m(l))}}}function Ft(n){let e,r,t,l=n[0].title.replace(/\p{Emoji}/gu,"")+"",a;return{c(){e=y("img"),t=B(),a=q(l),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,class:!0}),t=j(s),a=J(s,l),this.h()},h(){Le(e.src,r=V+"/settings/assistants/"+n[0].assistantId+"/avatar.jpg?hash="+n[0].avatarHash)||i(e,"src",r),i(e,"alt","Assistant avatar"),i(e,"class","mr-1.5 inline size-4 flex-none rounded-full object-cover")},m(s,o){$(s,e,o),$(s,t,o),$(s,a,o)},p(s,o){o&1&&!Le(e.src,r=V+"/settings/assistants/"+s[0].assistantId+"/avatar.jpg?hash="+s[0].avatarHash)&&i(e,"src",r),o&1&&l!==(l=s[0].title.replace(/\p{Emoji}/gu,"")+"")&&_e(a,l)},d(s){s&&(m(e),m(t),m(a))}}}function Kt(n){let e,r,t,l,a,s,o,f;return r=new Zt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),a=new Ct({props:{class:"text-xs text-gray-400  hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=y("button"),W(r.$$.fragment),t=B(),l=y("button"),W(a.$$.fragment),this.h()},l(d){e=k(d,"BUTTON",{type:!0,class:!0,title:!0});var u=C(e);Q(r.$$.fragment,u),u.forEach(m),t=j(d),l=k(d,"BUTTON",{type:!0,class:!0,title:!0});var h=C(l);Q(a.$$.fragment,h),h.forEach(m),this.h()},h(){i(e,"type","button"),i(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(e,"title","Edit conversation title"),i(l,"type","button"),i(l,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(l,"title","Delete conversation")},m(d,u){$(d,e,u),X(r,e,null),$(d,t,u),$(d,l,u),X(a,l,null),s=!0,o||(f=[ie(e,"click",Ee(n[6])),ie(l,"click",Ee(n[7]))],o=!0)},p:le,i(d){s||(L(r.$$.fragment,d),L(a.$$.fragment,d),s=!0)},o(d){H(r.$$.fragment,d),H(a.$$.fragment,d),s=!1},d(d){d&&(m(e),m(t),m(l)),Y(r),Y(a),o=!1,Ne(f)}}}function qt(n){let e,r,t,l,a,s,o,f;return r=new xt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),a=new dt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=y("button"),W(r.$$.fragment),t=B(),l=y("button"),W(a.$$.fragment),this.h()},l(d){e=k(d,"BUTTON",{type:!0,class:!0,title:!0});var u=C(e);Q(r.$$.fragment,u),u.forEach(m),t=j(d),l=k(d,"BUTTON",{type:!0,class:!0,title:!0});var h=C(l);Q(a.$$.fragment,h),h.forEach(m),this.h()},h(){i(e,"type","button"),i(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(e,"title","Confirm delete action"),i(l,"type","button"),i(l,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),i(l,"title","Cancel delete action")},m(d,u){$(d,e,u),X(r,e,null),$(d,t,u),$(d,l,u),X(a,l,null),s=!0,o||(f=[ie(e,"click",Ee(n[4])),ie(l,"click",Ee(n[5]))],o=!0)},p:le,i(d){s||(L(r.$$.fragment,d),L(a.$$.fragment,d),s=!0)},o(d){H(r.$$.fragment,d),H(a.$$.fragment,d),s=!1},d(d){d&&(m(e),m(t),m(l)),Y(r),Y(a),o=!1,Ne(f)}}}function Jt(n){let e,r,t,l,a,s,o,f,d,u,h,c=n[1]&&Ze();function g(E,N){return E[0].avatarHash?Ft:E[0].assistantId?Gt:Rt}let b=g(n),D=b(n);const _=[qt,Kt],w=[];function z(E,N){return E[1]?0:1}return a=z(n),s=w[a]=_[a](n),{c(){e=y("a"),r=y("div"),c&&c.c(),t=B(),D.c(),l=B(),s.c(),this.h()},l(E){e=k(E,"A",{"data-sveltekit-noscroll":!0,href:!0,class:!0});var N=C(e);r=k(N,"DIV",{class:!0});var S=C(r);c&&c.l(S),t=j(S),D.l(S),S.forEach(m),l=j(N),s.l(N),N.forEach(m),this.h()},h(){i(r,"class","flex flex-1 items-center truncate"),i(e,"data-sveltekit-noscroll",""),i(e,"href",o=V+"/conversation/"+n[0].id),i(e,"class",f="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(n[0].id===n[2].params.id?"bg-gray-100 dark:bg-gray-700":""))},m(E,N){$(E,e,N),p(e,r),c&&c.m(r,null),p(r,t),D.m(r,null),p(e,l),w[a].m(e,null),d=!0,u||(h=ie(e,"mouseleave",n[8]),u=!0)},p(E,[N]){E[1]?c||(c=Ze(),c.c(),c.m(r,t)):c&&(c.d(1),c=null),b===(b=g(E))&&D?D.p(E,N):(D.d(1),D=b(E),D&&(D.c(),D.m(r,null)));let S=a;a=z(E),a===S?w[a].p(E,N):(he(),H(w[S],1,1,()=>{w[S]=null}),ge(),s=w[a],s?s.p(E,N):(s=w[a]=_[a](E),s.c()),L(s,1),s.m(e,null)),(!d||N&1&&o!==(o=V+"/conversation/"+E[0].id))&&i(e,"href",o),(!d||N&5&&f!==(f="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(E[0].id===E[2].params.id?"bg-gray-100 dark:bg-gray-700":"")))&&i(e,"class",f)},i(E){d||(L(s),d=!0)},o(E){H(s),d=!1},d(E){E&&m(e),c&&c.d(),D.d(),w[a].d(),u=!1,h()}}}function Wt(n,e,r){let t;se(n,$e,c=>r(2,t=c));let{conv:l}=e,a=!1;const s=ut(),o=()=>{r(1,a=!1),s("deleteConversation",l.id)},f=()=>r(1,a=!1),d=()=>{const c=prompt("Edit this conversation title:",l.title);c&&s("editConversationTitle",{id:l.id,title:c})},u=c=>{c.shiftKey?s("deleteConversation",l.id):r(1,a=!0)},h=()=>{r(1,a=!1)};return n.$$set=c=>{"conv"in c&&r(0,l=c.conv)},[l,a,t,s,o,f,d,u,h]}class Qt extends ue{constructor(e){super(),fe(this,e,Wt,Jt,oe,{conv:0})}}function Re(n,e,r){const t=n.slice();return t[11]=e[r][0],t[12]=e[r][1],t}function Ge(n,e,r){const t=n.slice();return t[15]=e[r],t}function Fe(n){let e,r=n[5][n[11]]+"",t,l,a,s,o=Ce(n[12]),f=[];for(let u=0;u<o.length;u+=1)f[u]=Ke(Ge(n,o,u));const d=u=>H(f[u],1,1,()=>{f[u]=null});return{c(){e=y("h4"),t=q(r),l=B();for(let u=0;u<f.length;u+=1)f[u].c();a=ke(),this.h()},l(u){e=k(u,"H4",{class:!0});var h=C(e);t=J(h,r),h.forEach(m),l=j(u);for(let c=0;c<f.length;c+=1)f[c].l(u);a=ke(),this.h()},h(){i(e,"class","mb-1.5 mt-4 pl-0.5 text-sm text-gray-400 first:mt-0 dark:text-gray-500")},m(u,h){$(u,e,h),p(e,t),$(u,l,h);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(u,h);$(u,a,h),s=!0},p(u,h){if((!s||h&4)&&r!==(r=u[5][u[11]]+"")&&_e(t,r),h&4){o=Ce(u[12]);let c;for(c=0;c<o.length;c+=1){const g=Ge(u,o,c);f[c]?(f[c].p(g,h),L(f[c],1)):(f[c]=Ke(g),f[c].c(),L(f[c],1),f[c].m(a.parentNode,a))}for(he(),c=o.length;c<f.length;c+=1)d(c);ge()}},i(u){if(!s){for(let h=0;h<o.length;h+=1)L(f[h]);s=!0}},o(u){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)H(f[h]);s=!1},d(u){u&&(m(e),m(l),m(a)),ft(f,u)}}}function Ke(n){let e,r;return e=new Qt({props:{conv:n[15]}}),e.$on("editConversationTitle",n[8]),e.$on("deleteConversation",n[9]),{c(){W(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),r=!0},p(t,l){const a={};l&4&&(a.conv=t[15]),e.$set(a)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Y(e,t)}}}function qe(n){let e,r,t=n[12].length&&Fe(n);return{c(){t&&t.c(),e=ke()},l(l){t&&t.l(l),e=ke()},m(l,a){t&&t.m(l,a),$(l,e,a),r=!0},p(l,a){l[12].length?t?(t.p(l,a),a&4&&L(t,1)):(t=Fe(l),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(he(),H(t,1,1,()=>{t=null}),ge())},i(l){r||(L(t),r=!0)},o(l){H(t),r=!1},d(l){l&&m(e),t&&t.d(l)}}}function Je(n){var f,d;let e,r,t=(((f=n[1])==null?void 0:f.username)||((d=n[1])==null?void 0:d.email))+"",l,a,s,o="Sign Out";return{c(){e=y("form"),r=y("span"),l=q(t),a=B(),s=y("button"),s.textContent=o,this.h()},l(u){e=k(u,"FORM",{action:!0,method:!0,class:!0});var h=C(e);r=k(h,"SPAN",{class:!0});var c=C(r);l=J(c,t),c.forEach(m),a=j(h),s=k(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),me(s)!=="svelte-16fy7s"&&(s.textContent=o),h.forEach(m),this.h()},h(){i(r,"class","flex h-9 flex-none shrink items-center gap-1.5 truncate pr-2 text-gray-500 dark:text-gray-400"),i(s,"type","submit"),i(s,"class","ml-auto h-6 flex-none items-center gap-1.5 rounded-md border bg-white px-2 text-gray-700 shadow-sm group-hover:flex hover:shadow-none md:hidden dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 dark:hover:text-gray-300"),i(e,"action",V+"/logout"),i(e,"method","post"),i(e,"class","group flex items-center gap-1.5 rounded-lg pl-2.5 pr-2 hover:bg-gray-100 dark:hover:bg-gray-700")},m(u,h){$(u,e,h),p(e,r),p(r,l),p(e,a),p(e,s)},p(u,h){var c,g;h&2&&t!==(t=(((c=u[1])==null?void 0:c.username)||((g=u[1])==null?void 0:g.email))+"")&&_e(l,t)},d(u){u&&m(e)}}}function We(n){let e,r='<button type="submit" class="flex h-9 w-full flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700">Login</button>';return{c(){e=y("form"),e.innerHTML=r,this.h()},l(t){e=k(t,"FORM",{action:!0,method:!0,target:!0,"data-svelte-h":!0}),me(e)!=="svelte-mo1hdo"&&(e.innerHTML=r),this.h()},h(){i(e,"action",V+"/login"),i(e,"method","POST"),i(e,"target","_parent")},m(t,l){$(t,e,l)},d(t){t&&m(e)}}}function Xt(n){let e,r,t,l;return{c(){e=y("a"),r=q(`Models
			`),t=y("span"),l=q(n[6]),this.h()},l(a){e=k(a,"A",{href:!0,class:!0});var s=C(e);r=J(s,`Models
			`),t=k(s,"SPAN",{class:!0});var o=C(t);l=J(o,n[6]),o.forEach(m),s.forEach(m),this.h()},h(){i(t,"class","ml-auto rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-500 dark:border-gray-500 dark:text-gray-400"),i(e,"href",V+"/models"),i(e,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700")},m(a,s){$(a,e,s),p(e,r),p(e,t),p(t,l)},p:le,d(a){a&&m(e)}}}function Qe(n){let e,r=`Assistants
			<span class="ml-auto rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-500 dark:border-gray-500 dark:text-gray-400">New</span>`;return{c(){e=y("a"),e.innerHTML=r,this.h()},l(t){e=k(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),me(e)!=="svelte-6p74k5"&&(e.innerHTML=r),this.h()},h(){i(e,"href",V+"/assistants"),i(e,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700")},m(t,l){$(t,e,l)},d(t){t&&m(e)}}}function Yt(n){var Me,Ie;let e,r,t,l,a,s,o,f,d="New Chat",u,h,c,g,b,D,_,w="Theme",z,E,N,S,A="Settings",O,R,v,P;t=new ct({props:{classNames:"mr-1"}});let F=Ce(Object.entries(n[2])),M=[];for(let I=0;I<F.length;I+=1)M[I]=qe(Re(n,F,I));const T=I=>H(M[I],1,1,()=>{M[I]=null});let x=(((Me=n[1])==null?void 0:Me.username)||((Ie=n[1])==null?void 0:Ie.email))&&Je(n),U=n[0]&&We(),K=n[6]>1&&Xt(n),ee=n[3].data.enableAssistants&&Qe();return{c(){e=y("div"),r=y("a"),W(t.$$.fragment),l=B(),a=q(pe),s=q(`
		SynthAI`),o=B(),f=y("a"),f.textContent=d,u=B(),h=y("div");for(let I=0;I<M.length;I+=1)M[I].c();c=B(),g=y("div"),x&&x.c(),b=B(),U&&U.c(),D=B(),_=y("button"),_.textContent=w,z=B(),K&&K.c(),E=B(),ee&&ee.c(),N=B(),S=y("a"),S.textContent=A,O=B(),this.h()},l(I){e=k(I,"DIV",{class:!0});var G=C(e);r=k(G,"A",{class:!0,href:!0});var te=C(r);Q(t.$$.fragment,te),l=j(te),a=J(te,pe),s=J(te,`
		SynthAI`),te.forEach(m),o=j(G),f=k(G,"A",{href:!0,class:!0,"data-svelte-h":!0}),me(f)!=="svelte-19nyx7z"&&(f.textContent=d),G.forEach(m),u=j(I),h=k(I,"DIV",{class:!0});var we=C(h);for(let ve=0;ve<M.length;ve+=1)M[ve].l(we);we.forEach(m),c=j(I),g=k(I,"DIV",{class:!0});var Z=C(g);x&&x.l(Z),b=j(Z),U&&U.l(Z),D=j(Z),_=k(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),me(_)!=="svelte-ymga0p"&&(_.textContent=w),z=j(Z),K&&K.l(Z),E=j(Z),ee&&ee.l(Z),N=j(Z),S=k(Z,"A",{href:!0,class:!0,"data-svelte-h":!0}),me(S)!=="svelte-4sv8p6"&&(S.textContent=A),O=j(Z),Z.forEach(m),this.h()},h(){i(r,"class","flex items-center rounded-xl text-lg font-semibold"),i(r,"href",kt+V+"/"),i(f,"href",`${V}/`),i(f,"class","flex rounded-lg border bg-white px-2 py-0.5 text-center shadow-sm hover:shadow-none dark:border-gray-600 dark:bg-gray-700"),i(e,"class","sticky top-0 flex flex-none items-center justify-between px-3 py-3.5 max-sm:pt-0"),i(h,"class","scrollbar-custom flex flex-col gap-1 overflow-y-auto rounded-r-xl from-gray-50 px-3 pb-3 pt-2 max-sm:bg-gradient-to-t md:bg-gradient-to-l dark:from-gray-800/30"),i(_,"type","button"),i(_,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),i(S,"href",V+"/settings"),i(S,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),i(g,"class","mt-0.5 flex flex-col gap-1 rounded-r-xl p-3 text-sm md:bg-gradient-to-l md:from-gray-50 md:dark:from-gray-800/30")},m(I,G){$(I,e,G),p(e,r),X(t,r,null),p(r,l),p(r,a),p(r,s),p(e,o),p(e,f),$(I,u,G),$(I,h,G);for(let te=0;te<M.length;te+=1)M[te]&&M[te].m(h,null);$(I,c,G),$(I,g,G),x&&x.m(g,null),p(g,b),U&&U.m(g,null),p(g,D),p(g,_),p(g,z),K&&K.m(g,null),p(g,E),ee&&ee.m(g,null),p(g,N),p(g,S),p(g,O),R=!0,v||(P=[ie(f,"click",n[4]),ie(_,"click",zt)],v=!0)},p(I,[G]){var te,we;if(G&36){F=Ce(Object.entries(I[2]));let Z;for(Z=0;Z<F.length;Z+=1){const ve=Re(I,F,Z);M[Z]?(M[Z].p(ve,G),L(M[Z],1)):(M[Z]=qe(ve),M[Z].c(),L(M[Z],1),M[Z].m(h,null))}for(he(),Z=F.length;Z<M.length;Z+=1)T(Z);ge()}(te=I[1])!=null&&te.username||(we=I[1])!=null&&we.email?x?x.p(I,G):(x=Je(I),x.c(),x.m(g,b)):x&&(x.d(1),x=null),I[0]?U||(U=We(),U.c(),U.m(g,D)):U&&(U.d(1),U=null),I[6]>1&&K.p(I,G),I[3].data.enableAssistants?ee||(ee=Qe(),ee.c(),ee.m(g,N)):ee&&(ee.d(1),ee=null)},i(I){if(!R){L(t.$$.fragment,I);for(let G=0;G<F.length;G+=1)L(M[G]);R=!0}},o(I){H(t.$$.fragment,I),M=M.filter(Boolean);for(let G=0;G<M.length;G+=1)H(M[G]);R=!1},d(I){I&&(m(e),m(u),m(h),m(c),m(g)),Y(t),ft(M,I),x&&x.d(),U&&U.d(),K&&K.d(),ee&&ee.d(),v=!1,Ne(P)}}}function er(n,e,r){let t,l;se(n,$e,b=>r(3,l=b));let{conversations:a=[]}=e,{canLogin:s}=e,{user:o}=e;function f(){wt.set(!0)}const d=[new Date().setDate(new Date().getDate()-1),new Date().setDate(new Date().getDate()-7),new Date().setMonth(new Date().getMonth()-1)],u={today:"Today",week:"This week",month:"This month",older:"Older"},h=l.data.models.filter(b=>!b.unlisted).length;function c(b){De.call(this,n,b)}function g(b){De.call(this,n,b)}return n.$$set=b=>{"conversations"in b&&r(7,a=b.conversations),"canLogin"in b&&r(0,s=b.canLogin),"user"in b&&r(1,o=b.user)},n.$$.update=()=>{n.$$.dirty&128&&r(2,t={today:a.filter(({updatedAt:b})=>b.getTime()>d[0]),week:a.filter(({updatedAt:b})=>b.getTime()>d[1]&&b.getTime()<d[0]),month:a.filter(({updatedAt:b})=>b.getTime()>d[2]&&b.getTime()<d[1]),older:a.filter(({updatedAt:b})=>b.getTime()<d[2])})},[s,o,t,l,f,u,h,a,c,g]}class ht extends ue{constructor(e){super(),fe(this,e,er,Yt,oe,{conversations:7,canLogin:0,user:1})}}function tr(n){let e,r,t,l,a,s,o;return{c(){e=re("svg"),r=re("path"),t=re("path"),l=re("defs"),a=re("radialGradient"),s=re("stop"),o=re("stop"),this.h()},l(f){e=ne(f,"svg",{xmlns:!0,width:!0,height:!0,class:!0,fill:!0,viewBox:!0});var d=C(e);r=ne(d,"path",{fill:!0,d:!0}),C(r).forEach(m),t=ne(d,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(m),l=ne(d,"defs",{});var u=C(l);a=ne(u,"radialGradient",{id:!0,cx:!0,cy:!0,r:!0,gradientTransform:!0,gradientUnits:!0});var h=C(a);s=ne(h,"stop",{"stop-color":!0}),C(s).forEach(m),o=ne(h,"stop",{offset:!0,"stop-color":!0}),C(o).forEach(m),h.forEach(m),u.forEach(m),d.forEach(m),this.h()},h(){i(r,"fill","url(#a)"),i(r,"d","M.93 10.65A10.17 10.17 0 0 1 11.11.48h4.67a9.45 9.45 0 0 1 0 18.89H4.53L1.62 22.2a.38.38 0 0 1-.69-.28V10.65Z"),i(t,"fill","#000"),i(t,"fill-rule","evenodd"),i(t,"d","M11.52 7.4a1.86 1.86 0 1 1-3.72 0 1.86 1.86 0 0 1 3.72 0Zm7.57 0a1.86 1.86 0 1 1-3.73 0 1.86 1.86 0 0 1 3.73 0ZM8.9 12.9a.55.55 0 0 0-.11.35.76.76 0 0 1-1.51 0c0-.95.67-1.94 1.76-1.94 1.09 0 1.76 1 1.76 1.94H9.3a.55.55 0 0 0-.12-.35c-.06-.07-.1-.08-.13-.08s-.08 0-.14.08Zm4.04 0a.55.55 0 0 0-.12.35h-1.51c0-.95.68-1.94 1.76-1.94 1.1 0 1.77 1 1.77 1.94h-1.51a.55.55 0 0 0-.12-.35c-.06-.07-.11-.08-.14-.08-.02 0-.07 0-.13.08Zm-1.89.79c-.02 0-.07-.01-.13-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.75 1.95 1.1 0 1.77-1 1.77-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.14.08Zm4.04 0c-.03 0-.08-.01-.14-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.76 1.95 1.08 0 1.76-1 1.76-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.13.08Zm1.76-.44c0-.16.05-.28.12-.35.06-.07.1-.08.13-.08s.08 0 .14.08c.06.07.11.2.11.35a.76.76 0 0 0 1.51 0c0-.95-.67-1.94-1.76-1.94-1.09 0-1.76 1-1.76 1.94h1.5Z"),i(t,"clip-rule","evenodd"),i(s,"stop-color","#FFD21E"),i(o,"offset","1"),i(o,"stop-color","red"),i(a,"id","a"),i(a,"cx","0"),i(a,"cy","0"),i(a,"r","1"),i(a,"gradientTransform","matrix(0 31.37 -34.85 0 13.08 -9.02)"),i(a,"gradientUnits","userSpaceOnUse"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width","1em"),i(e,"height","1em"),i(e,"class",n[0]),i(e,"fill","none"),i(e,"viewBox","0 0 26 23")},m(f,d){$(f,e,d),p(e,r),p(e,t),p(e,l),p(l,a),p(a,s),p(a,o)},p(f,[d]){d&1&&i(e,"class",f[0])},i:le,o:le,d(f){f&&m(e)}}}function rr(n,e,r){let{classNames:t=""}=e;return n.$$set=l=>{"classNames"in l&&r(0,t=l.classNames)},[t]}class nr extends ue{constructor(e){super(),fe(this,e,rr,tr,oe,{classNames:0})}}function lr(n){let e,r,t,l,a,s,o,f;return t=new nr({props:{classNames:"text-2xl mr-2"}}),{c(){e=y("div"),r=y("div"),W(t.$$.fragment),l=B(),a=y("h2"),s=q(n[0]),this.h()},l(d){e=k(d,"DIV",{class:!0});var u=C(e);r=k(u,"DIV",{class:!0});var h=C(r);Q(t.$$.fragment,h),l=j(h),a=k(h,"H2",{class:!0});var c=C(a);s=J(c,n[0]),c.forEach(m),h.forEach(m),u.forEach(m),this.h()},h(){i(a,"class","font-semibold"),i(r,"class","pointer-events-auto flex items-center rounded-full bg-white/90 px-3 py-1 shadow-sm dark:bg-gray-900/80"),i(e,"class","pointer-events-none fixed right-0 top-12 z-20 bg-gradient-to-bl from-red-500/20 via-red-500/0 to-red-500/0 pb-36 pl-36 pr-2 pt-2 md:top-0 md:pr-8 md:pt-5")},m(d,u){$(d,e,u),p(e,r),X(t,r,null),p(r,l),p(r,a),p(a,s),f=!0},p(d,[u]){(!f||u&1)&&_e(s,d[0])},i(d){f||(L(t.$$.fragment,d),gt(()=>{f&&(o||(o=Oe(e,Ue,{duration:300},!0)),o.run(1))}),f=!0)},o(d){H(t.$$.fragment,d),o||(o=Oe(e,Ue,{duration:300},!1)),o.run(0),f=!1},d(d){d&&m(e),Y(t),d&&o&&o.end()}}}function ar(n,e,r){let{message:t=""}=e;return n.$$set=l=>{"message"in l&&r(0,t=l.message)},[t]}class sr extends ue{constructor(e){super(),fe(this,e,ar,lr,oe,{message:0})}}function Xe(n){let e,r,t;function l(o,f){return o[0].data.loginEnabled?or:ir}let a=l(n),s=a(n);return{c(){e=y("button"),s.c(),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var f=C(e);s.l(f),f.forEach(m),this.h()},h(){i(e,"class","w-full justify-center rounded-full border-2 border-gray-300 bg-black px-5 py-2 text-lg font-semibold text-gray-100 transition-colors hover:bg-gray-900"),de(e,"bg-white",n[0].data.loginEnabled),de(e,"text-gray-800",n[0].data.loginEnabled),de(e,"hover:bg-slate-100",n[0].data.loginEnabled)},m(o,f){$(o,e,f),s.m(e,null),r||(t=ie(e,"click",_t(Ee(n[3]))),r=!0)},p(o,f){a!==(a=l(o))&&(s.d(1),s=a(o),s&&(s.c(),s.m(e,null))),f&1&&de(e,"bg-white",o[0].data.loginEnabled),f&1&&de(e,"text-gray-800",o[0].data.loginEnabled),f&1&&de(e,"hover:bg-slate-100",o[0].data.loginEnabled)},d(o){o&&m(e),s.d(),r=!1,t()}}}function ir(n){let e;return{c(){e=q("Start chatting")},l(r){e=J(r,"Start chatting")},m(r,t){$(r,e,t)},d(r){r&&m(e)}}}function or(n){let e;return{c(){e=q("Try as guest")},l(r){e=J(r,"Try as guest")},m(r,t){$(r,e,t)},d(r){r&&m(e)}}}function Ye(n){let e,r,t,l,a=pe==="HuggingChat";return{c(){e=y("form"),r=y("button"),t=q(`Sign in
						`),this.h()},l(s){e=k(s,"FORM",{action:!0,target:!0,method:!0,class:!0});var o=C(e);r=k(o,"BUTTON",{type:!0,class:!0});var f=C(r);t=J(f,`Sign in
						`),f.forEach(m),o.forEach(m),this.h()},h(){i(r,"type","submit"),i(r,"class","flex w-full items-center justify-center whitespace-nowrap rounded-full border-2 border-black bg-black px-5 py-2 text-lg font-semibold text-gray-100 transition-colors hover:bg-gray-900"),i(e,"action",V+"/login"),i(e,"target","_parent"),i(e,"method","POST"),i(e,"class","w-full")},m(s,o){$(s,e,o),p(e,r),p(r,t),l=!0},i(s){l||(L(a),l=!0)},o(s){H(a),l=!1},d(s){s&&m(e)}}}function ur(n){let e,r,t,l,a,s,o,f,d,u,h,c,g,b,D;t=new ct({props:{classNames:"mr-1"}});let _=(n[0].data.guestMode||!n[0].data.loginEnabled)&&Xe(n),w=n[0].data.loginEnabled&&Ye();return{c(){e=y("div"),r=y("h2"),W(t.$$.fragment),l=B(),a=q(pe),s=B(),o=y("p"),f=q(Ae),d=B(),u=y("p"),h=q(je),c=B(),g=y("div"),_&&_.c(),b=B(),w&&w.c(),this.h()},l(z){e=k(z,"DIV",{class:!0});var E=C(e);r=k(E,"H2",{class:!0});var N=C(r);Q(t.$$.fragment,N),l=j(N),a=J(N,pe),N.forEach(m),s=j(E),o=k(E,"P",{class:!0,style:!0});var S=C(o);f=J(S,Ae),S.forEach(m),d=j(E),u=k(E,"P",{class:!0});var A=C(u);h=J(A,je),A.forEach(m),c=j(E),g=k(E,"DIV",{class:!0});var O=C(g);_&&_.l(O),b=j(O),w&&w.l(O),O.forEach(m),E.forEach(m),this.h()},h(){i(r,"class","flex items-center text-2xl font-semibold text-gray-800"),i(o,"class","text-lg font-semibold leading-snug text-gray-800"),pt(o,"text-wrap","balance"),i(u,"class","text-sm text-gray-500"),i(g,"class","flex w-full flex-col items-center gap-2"),i(e,"class","flex w-full flex-col items-center gap-6 bg-gradient-to-b from-primary-500/40 via-primary-500/10 to-primary-500/0 px-5 pb-8 pt-9 text-center sm:px-6")},m(z,E){$(z,e,E),p(e,r),X(t,r,null),p(r,l),p(r,a),p(e,s),p(e,o),p(o,f),p(e,d),p(e,u),p(u,h),p(e,c),p(e,g),_&&_.m(g,null),p(g,b),w&&w.m(g,null),D=!0},p(z,E){z[0].data.guestMode||!z[0].data.loginEnabled?_?_.p(z,E):(_=Xe(z),_.c(),_.m(g,b)):_&&(_.d(1),_=null),z[0].data.loginEnabled?w?E&1&&L(w,1):(w=Ye(),w.c(),L(w,1),w.m(g,null)):w&&(he(),H(w,1,1,()=>{w=null}),ge())},i(z){D||(L(t.$$.fragment,z),L(w),D=!0)},o(z){H(t.$$.fragment,z),H(w),D=!1},d(z){z&&m(e),Y(t),_&&_.d(),w&&w.d()}}}function fr(n){let e,r;return e=new Nt({props:{$$slots:{default:[ur]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),r=!0},p(t,[l]){const a={};l&19&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Y(e,t)}}}function cr(n,e,r){let t,l;se(n,$e,o=>r(0,t=o));const a=Et();return se(n,a,o=>r(1,l=o)),[t,l,a,()=>{Tt()||window.open(window.location.href,"_blank"),ce(a,l.ethicsModalAccepted=!0,l)}]}class dr extends ue{constructor(e){super(),fe(this,e,cr,fr,oe,{})}}function et(n){let e,r,t,l,a,s,o,f,d,u,h;return{c(){e=y("meta"),r=B(),t=y("meta"),l=B(),a=y("meta"),o=B(),f=y("meta"),u=B(),h=y("meta"),this.h()},l(c){e=k(c,"META",{property:!0,content:!0}),r=j(c),t=k(c,"META",{property:!0,content:!0}),l=j(c),a=k(c,"META",{property:!0,content:!0}),o=j(c),f=k(c,"META",{property:!0,content:!0}),u=j(c),h=k(c,"META",{property:!0,content:!0}),this.h()},h(){i(e,"property","og:title"),i(e,"content",pe),i(t,"property","og:type"),i(t,"content","website"),i(a,"property","og:url"),i(a,"content",s=""+(n[1].url.origin+V)),i(f,"property","og:image"),i(f,"content",d=n[1].url.origin+V+"/"+ae+"/thumbnail.png"),i(h,"property","og:description"),i(h,"content",Ae)},m(c,g){$(c,e,g),$(c,r,g),$(c,t,g),$(c,l,g),$(c,a,g),$(c,o,g),$(c,f,g),$(c,u,g),$(c,h,g)},p(c,g){g&2&&s!==(s=""+(c[1].url.origin+V))&&i(a,"content",s),g&2&&d!==(d=c[1].url.origin+V+"/"+ae+"/thumbnail.png")&&i(f,"content",d)},d(c){c&&(m(e),m(r),m(t),m(l),m(a),m(o),m(f),m(u),m(h))}}}function tt(n){let e,r;return e=new dr({}),{c(){W(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),r=!0},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Y(e,t)}}}function mr(n){let e,r;return e=new ht({props:{conversations:n[0].conversations,user:n[0].user,canLogin:n[0].user===void 0&&n[0].loginEnabled}}),e.$on("shareConversation",n[12]),e.$on("deleteConversation",n[13]),e.$on("editConversationTitle",n[14]),{c(){W(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),r=!0},p(t,l){const a={};l&1&&(a.conversations=t[0].conversations),l&1&&(a.user=t[0].user),l&1&&(a.canLogin=t[0].user===void 0&&t[0].loginEnabled),e.$set(a)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Y(e,t)}}}function rt(n){let e,r;return e=new sr({props:{message:n[4]}}),{c(){W(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){X(e,t,l),r=!0},p(t,l){const a={};l&16&&(a.message=t[4]),e.$set(a)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){H(e.$$.fragment,t),r=!1},d(t){Y(e,t)}}}function hr(n){let e,r,t,l=!n[1].url.pathname.includes("/assistant/")&&n[1].route.id!=="/assistants",a,s,o,f,d,u,h,c,g,b,D,_,w,z,E,N,S,A,O;document.title=pe;let R=l&&et(n),v=!n[2].ethicsModalAccepted&&n[1].url.pathname!==`${V}/privacy`&&tt();w=new Ht({props:{isOpen:n[3],title:n[5],$$slots:{default:[mr]},$$scope:{ctx:n}}}),w.$on("toggle",n[15]),N=new ht({props:{conversations:n[0].conversations,user:n[0].user,canLogin:n[0].user===void 0&&n[0].loginEnabled}}),N.$on("shareConversation",n[16]),N.$on("deleteConversation",n[17]),N.$on("editConversationTitle",n[18]);let P=n[4]&&rt(n);const F=n[11].default,M=at(F,n,n[19],null);return{c(){e=y("meta"),r=y("meta"),t=y("meta"),R&&R.c(),a=y("link"),o=y("link"),d=y("link"),h=y("link"),g=ke(),b=B(),v&&v.c(),D=B(),_=y("div"),W(w.$$.fragment),z=B(),E=y("nav"),W(N.$$.fragment),S=B(),P&&P.c(),A=B(),M&&M.c(),this.h()},l(T){const x=vt("svelte-lf23ke",document.head);e=k(x,"META",{name:!0,content:!0}),r=k(x,"META",{name:!0,content:!0}),t=k(x,"META",{name:!0,content:!0}),R&&R.l(x),a=k(x,"LINK",{rel:!0,href:!0,sizes:!0}),o=k(x,"LINK",{rel:!0,href:!0,type:!0}),d=k(x,"LINK",{rel:!0,href:!0}),h=k(x,"LINK",{rel:!0,href:!0}),g=ke(),x.forEach(m),b=j(T),v&&v.l(T),D=j(T),_=k(T,"DIV",{class:!0});var U=C(_);Q(w.$$.fragment,U),z=j(U),E=k(U,"NAV",{class:!0});var K=C(E);Q(N.$$.fragment,K),K.forEach(m),S=j(U),P&&P.l(U),A=j(U),M&&M.l(U),U.forEach(m),this.h()},h(){i(e,"name","description"),i(e,"content","The first open source alternative to ChatGPT. 💪"),i(r,"name","twitter:card"),i(r,"content","summary_large_image"),i(t,"name","twitter:site"),i(t,"content","@huggingface"),i(a,"rel","icon"),i(a,"href",s=n[1].url.origin+V+"/"+ae+"/favicon.ico"),i(a,"sizes","32x32"),i(o,"rel","icon"),i(o,"href",f=n[1].url.origin+V+"/"+ae+"/icon.svg"),i(o,"type","image/svg+xml"),i(d,"rel","apple-touch-icon"),i(d,"href",u=n[1].url.origin+V+"/"+ae+"/apple-touch-icon.png"),i(h,"rel","manifest"),i(h,"href",c=n[1].url.origin+V+"/"+ae+"/manifest.json"),i(E,"class","grid max-h-screen grid-cols-1 grid-rows-[auto,1fr,auto] max-md:hidden"),i(_,"class","grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd md:grid-cols-[280px,1fr] md:grid-rows-[1fr] dark:text-gray-300")},m(T,x){p(document.head,e),p(document.head,r),p(document.head,t),R&&R.m(document.head,null),p(document.head,a),p(document.head,o),p(document.head,d),p(document.head,h),p(document.head,g),$(T,b,x),v&&v.m(T,x),$(T,D,x),$(T,_,x),X(w,_,null),p(_,z),p(_,E),X(N,E,null),p(_,S),P&&P.m(_,null),p(_,A),M&&M.m(_,null),O=!0},p(T,[x]){x&2&&(l=!T[1].url.pathname.includes("/assistant/")&&T[1].route.id!=="/assistants"),l?R?R.p(T,x):(R=et(T),R.c(),R.m(a.parentNode,a)):R&&(R.d(1),R=null),(!O||x&2&&s!==(s=T[1].url.origin+V+"/"+ae+"/favicon.ico"))&&i(a,"href",s),(!O||x&2&&f!==(f=T[1].url.origin+V+"/"+ae+"/icon.svg"))&&i(o,"href",f),(!O||x&2&&u!==(u=T[1].url.origin+V+"/"+ae+"/apple-touch-icon.png"))&&i(d,"href",u),(!O||x&2&&c!==(c=T[1].url.origin+V+"/"+ae+"/manifest.json"))&&i(h,"href",c),!T[2].ethicsModalAccepted&&T[1].url.pathname!==`${V}/privacy`?v?x&6&&L(v,1):(v=tt(),v.c(),L(v,1),v.m(D.parentNode,D)):v&&(he(),H(v,1,1,()=>{v=null}),ge());const U={};x&8&&(U.isOpen=T[3]),x&32&&(U.title=T[5]),x&524289&&(U.$$scope={dirty:x,ctx:T}),w.$set(U);const K={};x&1&&(K.conversations=T[0].conversations),x&1&&(K.user=T[0].user),x&1&&(K.canLogin=T[0].user===void 0&&T[0].loginEnabled),N.$set(K),T[4]?P?(P.p(T,x),x&16&&L(P,1)):(P=rt(T),P.c(),L(P,1),P.m(_,A)):P&&(he(),H(P,1,1,()=>{P=null}),ge()),M&&M.p&&(!O||x&524288)&&st(M,F,T,T[19],O?ot(F,T[19],x,null):it(T[19]),null)},i(T){O||(L(v),L(w.$$.fragment,T),L(N.$$.fragment,T),L(P),L(M,T),O=!0)},o(T){H(v),H(w.$$.fragment,T),H(N.$$.fragment,T),H(P),H(M,T),O=!1},d(T){T&&(m(b),m(D),m(_)),m(e),m(r),m(t),R&&R.d(T),m(a),m(o),m(d),m(h),m(g),v&&v.d(T),Y(w),Y(N),P&&P.d(),M&&M.d(T)}}}function gr(n,e,r){let t,l,a,s,o;se(n,$e,v=>r(1,l=v)),se(n,ze,v=>r(9,s=v)),se(n,be,v=>r(10,o=v));let{$$slots:f={},$$scope:d}=e,{data:u}=e,h=!1,c,g;async function b(){o&&g&&o!==g&&(clearTimeout(c),r(4,g=null),await new Promise(v=>setTimeout(v,300))),r(4,g=o),c=setTimeout(()=>{ce(be,o=null,o),r(4,g=null)},3e3)}async function D(v){try{if(!(await fetch(`${V}/conversation/${v}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){ce(be,o="Error while deleting conversation, try again.",o);return}l.params.id!==v?await Be(Ve.ConversationList):await Pe(`${V}/`,{invalidateAll:!0})}catch(P){console.error(P),ce(be,o=String(P),o)}}async function _(v,P){try{if(!(await fetch(`${V}/conversation/${v}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:P})})).ok){ce(be,o="Error while editing title, try again.",o);return}await Be(Ve.ConversationList)}catch(F){console.error(F),ce(be,o=String(F),o)}}bt(()=>{clearTimeout(c)});const w=$t(u.settings);se(n,w,v=>r(2,a=v));const z=v=>He(v.detail.id,v.detail.title),E=v=>D(v.detail),N=v=>_(v.detail.id,v.detail.title),S=v=>r(3,h=v.detail),A=v=>He(v.detail.id,v.detail.title),O=v=>D(v.detail),R=v=>_(v.detail.id,v.detail.title);return n.$$set=v=>{"data"in v&&r(0,u=v.data),"$$scope"in v&&r(19,d=v.$$scope)},n.$$.update=()=>{var v;if(n.$$.dirty&1024&&o&&b(),n.$$.dirty&513&&s){const P=u.conversations.findIndex(({id:F})=>F===(s==null?void 0:s.convId));P!=-1&&r(0,u.conversations[P].title=(s==null?void 0:s.title)??u.conversations[P].title,u),r(0,u.conversations=[...u.conversations],u),ce(ze,s=null,s)}n.$$.dirty&6&&l.url.searchParams.has("model")&&(a.activeModel===l.url.searchParams.get("model")&&Pe(`${V}/?`),ce(w,a.activeModel=l.url.searchParams.get("model")??a.activeModel,a)),n.$$.dirty&3&&r(5,t=["/models","/assistants","/privacy"].includes(l.route.id??"")?"":(v=u.conversations.find(P=>P.id===l.params.id))==null?void 0:v.title)},[u,l,a,h,g,t,D,_,w,s,o,f,z,E,N,S,A,O,R,d]}class Sr extends ue{constructor(e){super(),fe(this,e,gr,hr,oe,{data:0})}}export{Sr as component};
