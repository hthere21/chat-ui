{"version":3,"file":"AssistantSettings-7b9c3e6b.js","sources":["../../../.svelte-kit/adapter-node/chunks/AssistantSettings.js"],"sourcesContent":["import { c as create_ssr_component, f as subscribe, e as escape, v as validate_component, a as add_attribute, h as each } from \"./ssr.js\";\nimport \"devalue\";\nimport { b as base } from \"./paths.js\";\nimport { P as Pen } from \"./pen.js\";\nimport { U as Upload } from \"./upload.js\";\nimport { u as useSettingsStore } from \"./settings2.js\";\nfunction getError(field, returnForm) {\n  return returnForm?.errors.find((error) => error.field === field)?.message ?? \"\";\n}\nconst AssistantSettings = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $settings, $$unsubscribe_settings;\n  let { form } = $$props;\n  let { assistant = void 0 } = $$props;\n  let { models = [] } = $$props;\n  const settings = useSettingsStore();\n  $$unsubscribe_settings = subscribe(settings, (value) => $settings = value);\n  let inputMessage1 = assistant?.exampleInputs[0] ?? \"\";\n  let inputMessage2 = assistant?.exampleInputs[1] ?? \"\";\n  let inputMessage3 = assistant?.exampleInputs[2] ?? \"\";\n  let inputMessage4 = assistant?.exampleInputs[3] ?? \"\";\n  let deleteExistingAvatar = false;\n  let loading = false;\n  if ($$props.form === void 0 && $$bindings.form && form !== void 0)\n    $$bindings.form(form);\n  if ($$props.assistant === void 0 && $$bindings.assistant && assistant !== void 0)\n    $$bindings.assistant(assistant);\n  if ($$props.models === void 0 && $$bindings.models && models !== void 0)\n    $$bindings.models(models);\n  $$unsubscribe_settings();\n  return `<form method=\"POST\" class=\"flex h-full flex-col\" enctype=\"multipart/form-data\">${assistant ? `<h2 class=\"text-xl font-semibold\">Edit assistant (${escape(assistant?.name ?? \"\")})</h2> <p class=\"mb-6 text-sm text-gray-500\" data-svelte-h=\"svelte-1jirery\">Modifying an existing assistant will propagate those changes to all users.</p>` : `<h2 class=\"text-xl font-semibold\" data-svelte-h=\"svelte-kn9trk\">Create new assistant</h2> <p class=\"mb-6 text-sm text-gray-500\" data-svelte-h=\"svelte-1851aq4\">Create and share your own AI Assistant. All assistants are <span class=\"rounded-full border px-2 py-0.5 leading-none\">public</span></p>`} <div class=\"mx-1 grid flex-1 grid-cols-2 gap-4 max-sm:grid-cols-1\"><div class=\"flex flex-col gap-4\"><div><span class=\"mb-1 block pb-2 text-sm font-semibold\" data-svelte-h=\"svelte-86e3cm\">Avatar</span> <input type=\"file\" accept=\"image/*\" name=\"avatar\" id=\"avatar\" class=\"hidden\"> ${assistant?.avatar && !deleteExistingAvatar ? `<div class=\"group relative mx-auto h-12 w-12\">${`${assistant?.avatar ? `<img src=\"${escape(base, true) + \"/settings/assistants/\" + escape(assistant._id, true) + \"/avatar.jpg?hash=\" + escape(assistant.avatar, true)}\" alt=\"avatar\" class=\"crop mx-auto h-12 w-12 cursor-pointer rounded-full object-cover\">` : ``}`} <label for=\"avatar\" class=\"invisible absolute bottom-0 h-12 w-12 rounded-full bg-black bg-opacity-50 p-1 group-hover:visible hover:visible\">${validate_component(Pen, \"CarbonPen\").$$render(\n    $$result,\n    {\n      class: \"mx-auto my-auto h-full cursor-pointer text-center text-white\"\n    },\n    {},\n    {}\n  )}</label></div> <div class=\"mx-auto w-max pt-1\"><button type=\"button\" class=\"mx-auto w-max text-center text-xs text-gray-600 hover:underline\" data-svelte-h=\"svelte-6eh37n\">Delete</button></div>` : `<div class=\"mb-1 flex w-max flex-row gap-4\"><label for=\"avatar\" class=\"btn flex h-8 rounded-lg border bg-white px-3 py-1 text-gray-500 shadow-sm transition-all hover:bg-gray-100\">${validate_component(Upload, \"CarbonUpload\").$$render($$result, { class: \"mr-2 text-xs \" }, {}, {})} Upload</label></div>`} <p class=\"text-xs text-red-500\">${escape(getError(\"avatar\", form))}</p></div> <label><span class=\"mb-1 text-sm font-semibold\" data-svelte-h=\"svelte-128iduy\">Name</span> <input name=\"name\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\" placeholder=\"My awesome model\"${add_attribute(\"value\", assistant?.name ?? \"\", 0)}> <p class=\"text-xs text-red-500\">${escape(getError(\"name\", form))}</p></label> <label><span class=\"mb-1 text-sm font-semibold\" data-svelte-h=\"svelte-88x4jt\">Description</span> <textarea name=\"description\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\" placeholder=\"He knows everything about python\">${escape(assistant?.description ?? \"\", false)}</textarea> <p class=\"text-xs text-red-500\">${escape(getError(\"description\", form))}</p></label> <label><span class=\"mb-1 text-sm font-semibold\" data-svelte-h=\"svelte-1b5jpwy\">Model</span> <select name=\"modelId\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\">${each(models.filter((model) => !model.unlisted), (model) => {\n    return `<option${add_attribute(\"value\", model.id, 0)} ${(assistant ? assistant?.modelId === model.id : $settings.activeModel === model.id) ? \"selected\" : \"\"}>${escape(model.displayName)}</option>`;\n  })}<p class=\"text-xs text-red-500\">${escape(getError(\"modelId\", form))}</p></select></label> <label><span class=\"mb-1 text-sm font-semibold\" data-svelte-h=\"svelte-5kr6hq\">User start messages</span> <div class=\"flex flex-col gap-2 md:max-h-32\"><input name=\"exampleInput1\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\"${add_attribute(\"value\", inputMessage1, 0)}> ${!!inputMessage1 || !!inputMessage2 ? `<input name=\"exampleInput2\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\"${add_attribute(\"value\", inputMessage2, 0)}>` : ``} ${!!inputMessage2 || !!inputMessage3 ? `<input name=\"exampleInput3\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\"${add_attribute(\"value\", inputMessage3, 0)}>` : ``} ${!!inputMessage3 || !!inputMessage4 ? `<input name=\"exampleInput4\" class=\"w-full rounded-lg border-2 border-gray-200 bg-gray-100 p-2\"${add_attribute(\"value\", inputMessage4, 0)}>` : ``}</div> <p class=\"text-xs text-red-500\">${escape(getError(\"inputMessage1\", form))}</p></label></div> <label class=\"flex flex-col\"><span class=\"mb-1 text-sm font-semibold\" data-svelte-h=\"svelte-gjd1si\">Instructions (system prompt)</span> <textarea name=\"preprompt\" class=\"min-h-[8lh] flex-1 rounded-lg border-2 border-gray-200 bg-gray-100 p-2 text-sm\" placeholder=\"You'll act as...\">${escape(assistant?.preprompt ?? \"\", false)}</textarea> <p class=\"text-xs text-red-500\">${escape(getError(\"preprompt\", form))}</p></label></div> <div class=\"mt-5 flex justify-end gap-2\"><a${add_attribute(\n    \"href\",\n    assistant ? `${base}/settings/assistants/${assistant?._id}` : `${base}/settings`,\n    0\n  )} class=\"rounded-full bg-gray-200 px-8 py-2 font-semibold text-gray-600\">Cancel</a> <button type=\"submit\" ${\"\"}${add_attribute(\"aria-disabled\", loading, 0)} class=\"${[\n    \"rounded-full bg-black px-8 py-2 font-semibold md:px-20\",\n    \"  text-white\"\n  ].join(\" \").trim()}\">${escape(assistant ? \"Save\" : \"Create\")} ${``}</button></div></form>`;\n});\nexport {\n  AssistantSettings as A\n};\n"],"names":[],"mappings":"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"}