{"version":3,"file":"convertLegacyConversation-2bdfc996.js","sources":["../../../.svelte-kit/adapter-node/chunks/convertLegacyConversation.js"],"sourcesContent":["function convertLegacyConversation(conv) {\n  if (conv.rootMessageId)\n    return conv;\n  if (conv.messages.length === 0)\n    return conv;\n  const messages = [\n    {\n      from: \"system\",\n      content: conv.preprompt ?? \"\",\n      createdAt: /* @__PURE__ */ new Date(),\n      updatedAt: /* @__PURE__ */ new Date(),\n      id: crypto.randomUUID()\n    },\n    ...conv.messages\n  ];\n  const rootMessageId = messages[0].id;\n  const newMessages = messages.map((message, index) => {\n    return {\n      ...message,\n      ancestors: messages.slice(0, index).map((m) => m.id),\n      children: index < messages.length - 1 ? [messages[index + 1].id] : []\n    };\n  });\n  return {\n    ...conv,\n    rootMessageId,\n    messages: newMessages\n  };\n}\nexport {\n  convertLegacyConversation as c\n};\n"],"names":[],"mappings":"AAAA,SAAS,yBAAyB,CAAC,IAAI,EAAE;AACzC,EAAE,IAAI,IAAI,CAAC,aAAa;AACxB,IAAI,OAAO,IAAI,CAAC;AAChB,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC;AAChC,IAAI,OAAO,IAAI,CAAC;AAChB,EAAE,MAAM,QAAQ,GAAG;AACnB,IAAI;AACJ,MAAM,IAAI,EAAE,QAAQ;AACpB,MAAM,OAAO,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;AACnC,MAAM,SAAS,kBAAkB,IAAI,IAAI,EAAE;AAC3C,MAAM,SAAS,kBAAkB,IAAI,IAAI,EAAE;AAC3C,MAAM,EAAE,EAAE,MAAM,CAAC,UAAU,EAAE;AAC7B,KAAK;AACL,IAAI,GAAG,IAAI,CAAC,QAAQ;AACpB,GAAG,CAAC;AACJ,EAAE,MAAM,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACvC,EAAE,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,KAAK,KAAK;AACvD,IAAI,OAAO;AACX,MAAM,GAAG,OAAO;AAChB,MAAM,SAAS,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;AAC1D,MAAM,QAAQ,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE;AAC3E,KAAK,CAAC;AACN,GAAG,CAAC,CAAC;AACL,EAAE,OAAO;AACT,IAAI,GAAG,IAAI;AACX,IAAI,aAAa;AACjB,IAAI,QAAQ,EAAE,WAAW;AACzB,GAAG,CAAC;AACJ;;;;"}