{"version":3,"file":"_server.ts-915c1ab1.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/conversation/_id_/_server.ts.js"],"sourcesContent":["import { c as collections } from \"../../../../../chunks/database.js\";\nimport { a as authCondition } from \"../../../../../chunks/auth.js\";\nimport { z } from \"zod\";\nimport { ObjectId } from \"mongodb\";\nasync function GET({ locals, params }) {\n  const id = z.string().parse(params.id);\n  const convId = new ObjectId(id);\n  if (locals.user?._id || locals.sessionId) {\n    const conv = await collections.conversations.findOne({\n      _id: convId,\n      ...authCondition(locals)\n    });\n    if (conv) {\n      const res = {\n        id: conv._id,\n        title: conv.title,\n        updatedAt: conv.updatedAt,\n        modelId: conv.model,\n        messages: conv.messages.map((message) => ({\n          content: message.content,\n          from: message.from,\n          id: message.id,\n          createdAt: message.createdAt,\n          updatedAt: message.updatedAt,\n          webSearch: message.webSearch\n        }))\n      };\n      return Response.json(res);\n    } else {\n      return Response.json({ message: \"Conversation not found\" }, { status: 404 });\n    }\n  } else {\n    return Response.json({ message: \"Must have session cookie\" }, { status: 401 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;AAIA,eAAe,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;AACvC,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACzC,EAAE,MAAM,MAAM,GAAG,IAAI,QAAQ,CAAC,EAAE,CAAC,CAAC;AAClC,EAAE,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AAC5C,IAAI,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC;AACzD,MAAM,GAAG,EAAE,MAAM;AACjB,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;AAC9B,KAAK,CAAC,CAAC;AACP,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,MAAM,GAAG,GAAG;AAClB,QAAQ,EAAE,EAAE,IAAI,CAAC,GAAG;AACpB,QAAQ,KAAK,EAAE,IAAI,CAAC,KAAK;AACzB,QAAQ,SAAS,EAAE,IAAI,CAAC,SAAS;AACjC,QAAQ,OAAO,EAAE,IAAI,CAAC,KAAK;AAC3B,QAAQ,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,MAAM;AAClD,UAAU,OAAO,EAAE,OAAO,CAAC,OAAO;AAClC,UAAU,IAAI,EAAE,OAAO,CAAC,IAAI;AAC5B,UAAU,EAAE,EAAE,OAAO,CAAC,EAAE;AACxB,UAAU,SAAS,EAAE,OAAO,CAAC,SAAS;AACtC,UAAU,SAAS,EAAE,OAAO,CAAC,SAAS;AACtC,UAAU,SAAS,EAAE,OAAO,CAAC,SAAS;AACtC,SAAS,CAAC,CAAC;AACX,OAAO,CAAC;AACR,MAAM,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChC,KAAK,MAAM;AACX,MAAM,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;AACnF,KAAK;AACL,GAAG,MAAM;AACT,IAAI,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,0BAA0B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;AACnF,GAAG;AACH;;;;"}