{"version":3,"file":"6-5e143495.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/conversation/_id_/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/6.js"],"sourcesContent":["import { c as collections } from \"../../../../chunks/database.js\";\nimport { ObjectId } from \"mongodb\";\nimport { e as error } from \"../../../../chunks/index.js\";\nimport { a as authCondition } from \"../../../../chunks/auth.js\";\nimport { U as UrlDependency } from \"../../../../chunks/UrlDependency.js\";\nimport { c as convertLegacyConversation } from \"../../../../chunks/convertLegacyConversation.js\";\nconst load = async ({ params, depends, locals }) => {\n  let conversation;\n  let shared = false;\n  if (params.id.length === 7) {\n    conversation = await collections.sharedConversations.findOne({\n      _id: params.id\n    });\n    shared = true;\n    if (!conversation) {\n      throw error(404, \"Conversation not found\");\n    }\n  } else {\n    conversation = await collections.conversations.findOne({\n      _id: new ObjectId(params.id),\n      ...authCondition(locals)\n    });\n    depends(UrlDependency.Conversation);\n    if (!conversation) {\n      const conversationExists = await collections.conversations.countDocuments({\n        _id: new ObjectId(params.id)\n      }) !== 0;\n      if (conversationExists) {\n        throw error(\n          403,\n          \"You don't have access to this conversation. If someone gave you this link, ask them to use the 'share' feature instead.\"\n        );\n      }\n      throw error(404, \"Conversation not found.\");\n    }\n  }\n  const convertedConv = { ...conversation, ...convertLegacyConversation(conversation) };\n  return {\n    messages: convertedConv.messages,\n    title: convertedConv.title,\n    model: convertedConv.model,\n    preprompt: convertedConv.preprompt,\n    rootMessageId: convertedConv.rootMessageId,\n    assistant: convertedConv.assistantId ? JSON.parse(\n      JSON.stringify(\n        await collections.assistants.findOne({\n          _id: new ObjectId(convertedConv.assistantId)\n        })\n      )\n    ) : null,\n    shared\n  };\n};\nexport {\n  load\n};\n","import * as server from '../entries/pages/conversation/_id_/_page.server.ts.js';\n\nexport const index = 6;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/conversation/_id_/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/conversation/[id]/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/6.f63d0caa.js\",\"_app/immutable/chunks/preload-helper.a4192956.js\",\"_app/immutable/chunks/scheduler.6a9d17f6.js\",\"_app/immutable/chunks/index.f8ec6462.js\",\"_app/immutable/chunks/pendingMessage.7e1e3cf9.js\",\"_app/immutable/chunks/each.81050b20.js\",\"_app/immutable/chunks/spread.84d39b6c.js\",\"_app/immutable/chunks/close.5676f196.js\",\"_app/immutable/chunks/checkmark.c1ac77be.js\",\"_app/immutable/chunks/singletons.7e5ab6ef.js\",\"_app/immutable/chunks/Switch.47a95eb7.js\",\"_app/immutable/chunks/stores.7cb53fc7.js\",\"_app/immutable/chunks/public.b85583f5.js\",\"_app/immutable/chunks/Modal.7c732ae4.js\",\"_app/immutable/chunks/index.e2b52378.js\",\"_app/immutable/chunks/settings.e8a11d43.js\",\"_app/immutable/chunks/navigation.b63c9ed8.js\",\"_app/immutable/chunks/cookiesAreEnabled.7d4925e8.js\",\"_app/immutable/chunks/IconLoading.fcfe275c.js\",\"_app/immutable/chunks/marked.esm.76161808.js\",\"_app/immutable/chunks/CopyToClipBoardBtn.abd1fd98.js\",\"_app/immutable/chunks/pen.34648ac3.js\",\"_app/immutable/chunks/arrow-up-right.f5284a17.js\",\"_app/immutable/chunks/titleUpdate.48e3cd22.js\"];\nexport const stylesheets = [\"_app/immutable/assets/pendingMessage.de4b1a0f.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}