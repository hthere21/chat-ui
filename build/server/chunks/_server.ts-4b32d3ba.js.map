{"version":3,"file":"_server.ts-4b32d3ba.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/conversations/_server.ts.js"],"sourcesContent":["import { c as collections } from \"../../../../chunks/database.js\";\nimport { a as authCondition } from \"../../../../chunks/auth.js\";\nasync function GET({ locals }) {\n  if (locals.user?._id || locals.sessionId) {\n    const convs = await collections.conversations.find({\n      ...authCondition(locals)\n    }).project({\n      title: 1,\n      updatedAt: 1,\n      model: 1\n    }).sort({ updatedAt: -1 }).toArray();\n    const res = convs.map((conv) => ({\n      id: conv._id,\n      title: conv.title,\n      updatedAt: conv.updatedAt,\n      modelId: conv.model\n    }));\n    return Response.json(res);\n  } else {\n    return Response.json({ message: \"Must have session cookie\" }, { status: 401 });\n  }\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,eAAe,GAAG,CAAC,EAAE,MAAM,EAAE,EAAE;AAC/B,EAAE,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE;AAC5C,IAAI,MAAM,KAAK,GAAG,MAAM,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC;AACvD,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;AAC9B,KAAK,CAAC,CAAC,OAAO,CAAC;AACf,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,SAAS,EAAE,CAAC;AAClB,MAAM,KAAK,EAAE,CAAC;AACd,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;AACzC,IAAI,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM;AACrC,MAAM,EAAE,EAAE,IAAI,CAAC,GAAG;AAClB,MAAM,KAAK,EAAE,IAAI,CAAC,KAAK;AACvB,MAAM,SAAS,EAAE,IAAI,CAAC,SAAS;AAC/B,MAAM,OAAO,EAAE,IAAI,CAAC,KAAK;AACzB,KAAK,CAAC,CAAC,CAAC;AACR,IAAI,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC9B,GAAG,MAAM;AACT,IAAI,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,0BAA0B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;AACnF,GAAG;AACH;;;;"}