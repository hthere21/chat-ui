{"version":3,"file":"_server.ts-96f7687a.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/conversation/_id_/_server.ts.js"],"sourcesContent":["import { s as sha256, a as authCondition, r as requiresUser } from \"../../../../chunks/auth.js\";\nimport { c as collections } from \"../../../../chunks/database.js\";\nimport { s as smallModel, e as embeddingModels, d as defaultEmbeddingModel, c as chunk, m as models } from \"../../../../chunks/models.js\";\nimport { e as error } from \"../../../../chunks/index.js\";\nimport { ObjectId } from \"mongodb\";\nimport { z } from \"zod\";\nimport \"serpapi\";\nimport { VirtualConsole, JSDOM } from \"jsdom\";\nimport { format } from \"date-fns\";\nimport { W as WEBSEARCH_ALLOWLIST, a as WEBSEARCH_BLOCKLIST } from \"../../../../chunks/private.js\";\nimport JSON5 from \"json5\";\nimport { dot } from \"@xenova/transformers\";\nimport { setTimeout as setTimeout$1 } from \"node:timers/promises\";\nimport sizeof from \"image-size\";\nimport { c as convertLegacyConversation } from \"../../../../chunks/convertLegacyConversation.js\";\nimport { i as isMessageId, b as buildSubtree } from \"../../../../chunks/buildSubtree.js\";\nimport { d as downloadFile } from \"../../../../chunks/downloadFile.js\";\nvar WebSearchProvider = /* @__PURE__ */ ((WebSearchProvider2) => {\n  WebSearchProvider2[\"GOOGLE\"] = \"Google\";\n  WebSearchProvider2[\"YOU\"] = \"You.com\";\n  WebSearchProvider2[\"SEARXNG\"] = \"SearXNG\";\n  return WebSearchProvider2;\n})(WebSearchProvider || {});\nfunction getWebSearchProvider() {\n  {\n    return WebSearchProvider.GOOGLE;\n  }\n}\nasync function searchWeb(query) {\n  throw new Error(\"No You.com or Serper.dev or SerpAPI key found\");\n}\nasync function generateFromDefaultEndpoint({\n  messages,\n  preprompt\n}) {\n  const endpoint = await smallModel.getEndpoint();\n  const tokenStream = await endpoint({ messages, preprompt });\n  for await (const output of tokenStream) {\n    if (output.generated_text) {\n      let generated_text = output.generated_text;\n      for (const stop of [...smallModel.parameters?.stop ?? [], \"<|endoftext|>\"]) {\n        if (generated_text.endsWith(stop)) {\n          generated_text = generated_text.slice(0, -stop.length).trimEnd();\n        }\n      }\n      return generated_text;\n    }\n  }\n  throw new Error(\"Generation failed\");\n}\nconst listSchema = z.array(z.string()).default([]);\nconst allowList = listSchema.parse(JSON5.parse(WEBSEARCH_ALLOWLIST));\nconst blockList = listSchema.parse(JSON5.parse(WEBSEARCH_BLOCKLIST));\nconst queryModifier = [\n  ...allowList.map((item) => \"site:\" + item),\n  ...blockList.map((item) => \"-site:\" + item)\n].join(\" \");\nasync function generateQuery(messages) {\n  const currentDate = format(/* @__PURE__ */ new Date(), \"MMMM d, yyyy\");\n  const userMessages = messages.filter(({ from }) => from === \"user\");\n  const previousUserMessages = userMessages.slice(0, -1);\n  const lastMessage = userMessages.slice(-1)[0];\n  const convQuery = [\n    {\n      from: \"user\",\n      content: `Previous Questions:\n- Who is the president of France?\n\nCurrent Question: What about Mexico?\n`\n    },\n    {\n      from: \"assistant\",\n      content: \"President of Mexico\"\n    },\n    {\n      from: \"user\",\n      content: `Previous questions: \n- When is the next formula 1 grand prix?\n\nCurrent Question: Where is it being hosted?`\n    },\n    {\n      from: \"assistant\",\n      content: \"location of next formula 1 grand prix\"\n    },\n    {\n      from: \"user\",\n      content: \"Current Question: What type of printhead does the Epson F2270 DTG printer use?\"\n    },\n    {\n      from: \"assistant\",\n      content: \"Epson F2270 DTG printer printhead\"\n    },\n    { from: \"user\", content: \"What were the news yesterday?\" },\n    {\n      from: \"assistant\",\n      content: `news ${format(new Date(Date.now() - 864e5), \"MMMM d, yyyy\")}`\n    },\n    { from: \"user\", content: \"What is the current weather in Paris?\" },\n    { from: \"assistant\", content: `weather in Paris ${currentDate}` },\n    {\n      from: \"user\",\n      content: (previousUserMessages.length > 0 ? `Previous questions: \n${previousUserMessages.map(({ content }) => `- ${content}`).join(\"\\n\")}` : \"\") + \"\\n\\nCurrent Question: \" + lastMessage.content\n    }\n  ];\n  const webQuery = await generateFromDefaultEndpoint({\n    messages: convQuery,\n    preprompt: `You are tasked with generating web search queries. Give me an appropriate query to answer my question for google search. Answer with only the query. Today is ${currentDate}`\n  });\n  return (queryModifier + \" \" + webQuery).trim();\n}\nasync function parseWeb(url) {\n  const abortController = new AbortController();\n  setTimeout(() => abortController.abort(), 1e4);\n  const htmlString = await fetch(url, { signal: abortController.signal }).then((response) => response.text()).catch();\n  const virtualConsole = new VirtualConsole();\n  virtualConsole.on(\"error\", () => {\n  });\n  const dom = new JSDOM(htmlString ?? \"\", {\n    virtualConsole\n  });\n  const { document } = dom.window;\n  const textElTags = \"p\";\n  const paragraphs = document.querySelectorAll(textElTags);\n  if (!paragraphs.length) {\n    throw new Error(`webpage doesn't have any \"${textElTags}\" element`);\n  }\n  const paragraphTexts = Array.from(paragraphs).map((p) => p.textContent);\n  const text = paragraphTexts.join(\" \").replace(/ {2}|\\r\\n|\\n|\\r/gm, \"\");\n  return text;\n}\nfunction innerProduct(embeddingA, embeddingB) {\n  return 1 - dot(embeddingA, embeddingB);\n}\nasync function findSimilarSentences(embeddingModel, query, sentences, { topK = 5 }) {\n  const inputs = [\n    `${embeddingModel.preQuery}${query}`,\n    ...sentences.map((sentence) => `${embeddingModel.prePassage}${sentence}`)\n  ];\n  const embeddingEndpoint = await embeddingModel.getEndpoint();\n  const output = await embeddingEndpoint({ inputs });\n  const queryEmbedding = output[0];\n  const sentencesEmbeddings = output.slice(1, inputs.length - 1);\n  const distancesFromQuery = [...sentencesEmbeddings].map(\n    (sentenceEmbedding, index) => {\n      return {\n        distance: innerProduct(queryEmbedding, sentenceEmbedding),\n        index\n      };\n    }\n  );\n  distancesFromQuery.sort((a, b) => {\n    return a.distance - b.distance;\n  });\n  return distancesFromQuery.slice(0, topK).map((item) => item.index);\n}\nconst MAX_N_PAGES_SCRAPE = 10;\nconst MAX_N_PAGES_EMBED = 5;\nconst DOMAIN_BLOCKLIST = [\"youtube.com\", \"twitter.com\"];\nasync function runWebSearch(conv, messages, updatePad) {\n  const prompt = messages[messages.length - 1].content;\n  const webSearch = {\n    prompt,\n    searchQuery: \"\",\n    results: [],\n    context: \"\",\n    contextSources: [],\n    createdAt: /* @__PURE__ */ new Date(),\n    updatedAt: /* @__PURE__ */ new Date()\n  };\n  function appendUpdate(message, args, type) {\n    updatePad({ type: \"webSearch\", messageType: type ?? \"update\", message, args });\n  }\n  try {\n    webSearch.searchQuery = await generateQuery(messages);\n    const searchProvider = getWebSearchProvider();\n    appendUpdate(`Searching ${searchProvider}`, [webSearch.searchQuery]);\n    const results = await searchWeb(webSearch.searchQuery);\n    webSearch.results = (results.organic_results && results.organic_results.map((el) => {\n      try {\n        const { title, link, text } = el;\n        const { hostname } = new URL(link);\n        return { title, link, hostname, text };\n      } catch (e) {\n        return null;\n      }\n    })) ?? [];\n    webSearch.results = webSearch.results.filter((value) => value !== null);\n    webSearch.results = webSearch.results.filter(({ link }) => !DOMAIN_BLOCKLIST.some((el) => link.includes(el))).slice(0, MAX_N_PAGES_SCRAPE);\n    const embeddingModel = embeddingModels.find((m) => m.id === conv.embeddingModel) ?? defaultEmbeddingModel;\n    if (!embeddingModel) {\n      throw new Error(`Embedding model ${conv.embeddingModel} not available anymore`);\n    }\n    let paragraphChunks = [];\n    if (webSearch.results.length > 0) {\n      appendUpdate(\"Browsing results\");\n      const promises = webSearch.results.map(async (result) => {\n        const { link } = result;\n        let text = result.text ?? \"\";\n        if (!text) {\n          try {\n            text = await parseWeb(link);\n            appendUpdate(\"Browsing webpage\", [link]);\n          } catch (e) {\n          }\n        }\n        const MAX_N_CHUNKS = 100;\n        const texts2 = chunk(text, embeddingModel.chunkCharLength).slice(0, MAX_N_CHUNKS);\n        return texts2.map((t) => ({ source: result, text: t }));\n      });\n      const nestedParagraphChunks = (await Promise.all(promises)).slice(0, MAX_N_PAGES_EMBED);\n      paragraphChunks = nestedParagraphChunks.flat();\n      if (!paragraphChunks.length) {\n        throw new Error(\"No text found on the first 5 results\");\n      }\n    } else {\n      throw new Error(\"No results found for this search query\");\n    }\n    appendUpdate(\"Extracting relevant information\");\n    const topKClosestParagraphs = 8;\n    const texts = paragraphChunks.map(({ text }) => text);\n    const indices = await findSimilarSentences(embeddingModel, prompt, texts, {\n      topK: topKClosestParagraphs\n    });\n    webSearch.context = indices.map((idx) => texts[idx]).join(\"\");\n    const usedSources = /* @__PURE__ */ new Set();\n    for (const idx of indices) {\n      const { source } = paragraphChunks[idx];\n      if (!usedSources.has(source.link)) {\n        usedSources.add(source.link);\n        webSearch.contextSources.push(source);\n      }\n    }\n    updatePad({\n      type: \"webSearch\",\n      messageType: \"sources\",\n      message: \"sources\",\n      sources: webSearch.contextSources\n    });\n  } catch (searchError) {\n    if (searchError instanceof Error) {\n      appendUpdate(\"An error occurred\", [JSON.stringify(searchError.message)], \"error\");\n    }\n  }\n  return webSearch;\n}\nlet closed = false;\nprocess.on(\"SIGINT\", () => {\n  closed = true;\n});\nlet abortedGenerations = /* @__PURE__ */ new Map();\nasync function maintainAbortedGenerations() {\n  while (!closed) {\n    await setTimeout$1(1e3);\n    try {\n      const aborts = await collections.abortedGenerations.find({}).sort({ createdAt: 1 }).toArray();\n      abortedGenerations = new Map(\n        aborts.map(({ conversationId, createdAt }) => [conversationId.toString(), createdAt])\n      );\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\nmaintainAbortedGenerations();\nasync function summarize(prompt) {\n  const messages = [\n    { from: \"user\", content: \"Who is the president of Gabon?\" },\n    { from: \"assistant\", content: \"🇬🇦 President of Gabon\" },\n    { from: \"user\", content: \"Who is Julien Chaumond?\" },\n    { from: \"assistant\", content: \"🧑 Julien Chaumond\" },\n    { from: \"user\", content: \"what is 1 + 1?\" },\n    { from: \"assistant\", content: \"🔢 Simple math operation\" },\n    { from: \"user\", content: \"What are the latest news?\" },\n    { from: \"assistant\", content: \"📰 Latest news\" },\n    { from: \"user\", content: \"How to make a great cheesecake?\" },\n    { from: \"assistant\", content: \"🍰 Cheesecake recipe\" },\n    { from: \"user\", content: \"what is your favorite movie? do a short answer.\" },\n    { from: \"assistant\", content: \"🎥 Favorite movie\" },\n    { from: \"user\", content: \"Explain the concept of artificial intelligence in one sentence\" },\n    { from: \"assistant\", content: \"🤖 AI definition\" },\n    { from: \"user\", content: prompt }\n  ];\n  return await generateFromDefaultEndpoint({\n    messages,\n    preprompt: `You are a summarization AI. You'll never answer a user's question directly, but instead summarize the user's request into a single short sentence of four words or less. Always start your answer with an emoji relevant to the summary.`\n  }).then((summary) => {\n    if (!/\\p{Emoji}/u.test(summary.slice(0, 3))) {\n      return \"💬 \" + summary;\n    }\n    return summary;\n  }).catch((e) => {\n    console.error(e);\n    return null;\n  });\n}\nasync function uploadFile(file, conv) {\n  const sha = await sha256(await file.text());\n  const upload = collections.bucket.openUploadStream(`${conv._id}-${sha}`, {\n    metadata: { conversation: conv._id.toString(), mime: \"image/jpeg\" }\n  });\n  upload.write(await file.arrayBuffer());\n  upload.end();\n  return new Promise((resolve, reject) => {\n    upload.once(\"finish\", () => resolve(sha));\n    upload.once(\"error\", reject);\n    setTimeout(() => reject(new Error(\"Upload timed out\")), 1e4);\n  });\n}\nfunction addChildren(conv, message, parentId) {\n  if (conv.messages.length === 0) {\n    const messageId2 = crypto.randomUUID();\n    conv.rootMessageId = messageId2;\n    conv.messages.push({\n      ...message,\n      ancestors: [],\n      id: messageId2\n    });\n    return messageId2;\n  }\n  if (!parentId) {\n    throw new Error(\"You need to specify a parentId if this is not the first message\");\n  }\n  const messageId = crypto.randomUUID();\n  if (!conv.rootMessageId) {\n    if (!!parentId && parentId !== conv.messages[conv.messages.length - 1].id) {\n      throw new Error(\"This is a legacy conversation, you can only append to the last message\");\n    }\n    conv.messages.push({ ...message, id: messageId });\n    return messageId;\n  }\n  const ancestors = [...conv.messages.find((m) => m.id === parentId)?.ancestors ?? [], parentId];\n  conv.messages.push({\n    ...message,\n    ancestors,\n    id: messageId,\n    children: []\n  });\n  const parent = conv.messages.find((m) => m.id === parentId);\n  if (parent) {\n    if (parent.children) {\n      parent.children.push(messageId);\n    } else\n      parent.children = [messageId];\n  }\n  return messageId;\n}\nfunction addSibling(conv, message, siblingId) {\n  if (conv.messages.length === 0) {\n    throw new Error(\"Cannot add a sibling to an empty conversation\");\n  }\n  if (!conv.rootMessageId) {\n    throw new Error(\"Cannot add a sibling to a legacy conversation\");\n  }\n  const sibling = conv.messages.find((m) => m.id === siblingId);\n  if (!sibling) {\n    throw new Error(\"The sibling message doesn't exist\");\n  }\n  if (!sibling.ancestors || sibling.ancestors?.length === 0) {\n    throw new Error(\"The sibling message is the root message, therefore we can't add a sibling\");\n  }\n  const messageId = crypto.randomUUID();\n  conv.messages.push({\n    ...message,\n    id: messageId,\n    ancestors: sibling.ancestors,\n    children: []\n  });\n  const nearestAncestorId = sibling.ancestors[sibling.ancestors.length - 1];\n  const nearestAncestor = conv.messages.find((m) => m.id === nearestAncestorId);\n  if (nearestAncestor) {\n    if (nearestAncestor.children) {\n      nearestAncestor.children.push(messageId);\n    } else\n      nearestAncestor.children = [messageId];\n  }\n  return messageId;\n}\nasync function preprocessMessages(messages, multimodal, id) {\n  return await Promise.all(\n    messages.map(async (message, idx) => {\n      if (idx === messages.length - 1 && message.webSearch && message.webSearch.context) {\n        const lastUsrMsgIndex = messages.map((el) => el.from).lastIndexOf(\"user\");\n        const previousUserMessages = messages.filter((el) => el.from === \"user\").slice(0, -1);\n        const previousQuestions = previousUserMessages.length > 0 ? `Previous questions: \n${previousUserMessages.map(({ content }) => `- ${content}`).join(\"\\n\")}` : \"\";\n        const currentDate = format(/* @__PURE__ */ new Date(), \"MMMM d, yyyy\");\n        message.content = `I searched the web using the query: ${message.webSearch.searchQuery}. Today is ${currentDate} and here are the results:\n=====================\n${message.webSearch.context}\n=====================\n${previousQuestions}\nAnswer the question: ${messages[lastUsrMsgIndex].content}`;\n      }\n      if (multimodal) {\n        if (message.files && message.files.length > 0) {\n          const markdowns = await Promise.all(\n            message.files.map(async (hash) => {\n              try {\n                const { content: image, mime } = await downloadFile(hash, id);\n                const b64 = image.toString(\"base64\");\n                return `![](data:${mime};base64,${b64})})`;\n              } catch (e) {\n                console.error(e);\n              }\n            })\n          );\n          message.content += markdowns.join(\"\\n \");\n        } else {\n          message.content += \"\\n![](data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQABADAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/igAoAKACgD/2Q==)\";\n        }\n      }\n      return message;\n    })\n  );\n}\nasync function POST({ request, locals, params, getClientAddress }) {\n  const id = z.string().parse(params.id);\n  const convId = new ObjectId(id);\n  const promptedAt = /* @__PURE__ */ new Date();\n  const userId = locals.user?._id ?? locals.sessionId;\n  if (!userId) {\n    throw error(401, \"Unauthorized\");\n  }\n  const convBeforeCheck = await collections.conversations.findOne({\n    _id: convId,\n    ...authCondition(locals)\n  });\n  if (convBeforeCheck && !convBeforeCheck.rootMessageId) {\n    const res = await collections.conversations.updateOne(\n      {\n        _id: convId\n      },\n      {\n        $set: {\n          ...convBeforeCheck,\n          ...convertLegacyConversation(convBeforeCheck)\n        }\n      }\n    );\n    if (!res.acknowledged) {\n      throw error(500, \"Failed to convert conversation\");\n    }\n  }\n  const conv = await collections.conversations.findOne({\n    _id: convId,\n    ...authCondition(locals)\n  });\n  if (!conv) {\n    throw error(404, \"Conversation not found\");\n  }\n  await collections.messageEvents.insertOne({\n    userId,\n    createdAt: /* @__PURE__ */ new Date(),\n    ip: getClientAddress()\n  });\n  const messagesBeforeLogin = 0;\n  if (!locals.user?._id && requiresUser && messagesBeforeLogin) {\n    const totalMessages = (await collections.conversations.aggregate([\n      { $match: { ...authCondition(locals), \"messages.from\": \"assistant\" } },\n      { $project: { messages: 1 } },\n      { $limit: messagesBeforeLogin + 1 },\n      { $unwind: \"$messages\" },\n      { $match: { \"messages.from\": \"assistant\" } },\n      { $count: \"messages\" }\n    ]).toArray())[0]?.messages ?? 0;\n    if (totalMessages > messagesBeforeLogin) {\n      throw error(429, \"Exceeded number of messages before login\");\n    }\n  }\n  Math.max(\n    await collections.messageEvents.countDocuments({ userId }),\n    await collections.messageEvents.countDocuments({ ip: getClientAddress() })\n  );\n  const model = models.find((m) => m.id === conv.model);\n  if (!model) {\n    throw error(410, \"Model not available anymore\");\n  }\n  const json = await request.json();\n  const {\n    inputs: newPrompt,\n    id: messageId,\n    is_retry: isRetry,\n    is_continue: isContinue,\n    web_search: webSearch,\n    files: b64files\n  } = z.object({\n    id: z.string().uuid().refine(isMessageId).optional(),\n    // parent message id to append to for a normal message, or the message id for a retry/continue\n    inputs: z.optional(z.string().trim().min(1)),\n    is_retry: z.optional(z.boolean()),\n    is_continue: z.optional(z.boolean()),\n    web_search: z.optional(z.boolean()),\n    files: z.optional(z.array(z.string()))\n  }).parse(json);\n  const files = b64files?.map((file) => {\n    const blob = Buffer.from(file, \"base64\");\n    return new File([blob], \"image.png\");\n  });\n  if (files) {\n    const filechecks = await Promise.all(\n      files.map(async (file) => {\n        const dimensions = sizeof(Buffer.from(await file.arrayBuffer()));\n        return file.size > 2 * 1024 * 1024 || (dimensions.width ?? 0) > 224 || (dimensions.height ?? 0) > 224;\n      })\n    );\n    if (filechecks.some((check) => check)) {\n      throw error(413, \"File too large, should be <2MB and 224x224 max.\");\n    }\n  }\n  let hashes;\n  if (files) {\n    hashes = await Promise.all(files.map(async (file) => await uploadFile(file, conv)));\n  }\n  let messageToWriteToId = void 0;\n  let messagesForPrompt = [];\n  if (isContinue && messageId) {\n    if ((conv.messages.find((msg) => msg.id === messageId)?.children?.length ?? 0) > 0) {\n      throw error(400, \"Can only continue the last message\");\n    }\n    messageToWriteToId = messageId;\n    messagesForPrompt = buildSubtree(conv, messageId);\n  } else if (isRetry && messageId) {\n    const messageToRetry = conv.messages.find((message) => message.id === messageId);\n    if (!messageToRetry) {\n      throw error(404, \"Message not found\");\n    }\n    if (messageToRetry.from === \"user\" && newPrompt) {\n      const newUserMessageId = addSibling(conv, { from: \"user\", content: newPrompt }, messageId);\n      messageToWriteToId = addChildren(\n        conv,\n        { from: \"assistant\", content: \"\", files: hashes },\n        newUserMessageId\n      );\n      messagesForPrompt = buildSubtree(conv, newUserMessageId);\n    } else if (messageToRetry.from === \"assistant\") {\n      messageToWriteToId = addSibling(conv, { from: \"assistant\", content: \"\" }, messageId);\n      messagesForPrompt = buildSubtree(conv, messageId);\n      messagesForPrompt.pop();\n    }\n  } else {\n    const newUserMessageId = addChildren(\n      conv,\n      {\n        from: \"user\",\n        content: newPrompt ?? \"\",\n        files: hashes,\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date()\n      },\n      messageId\n    );\n    messageToWriteToId = addChildren(\n      conv,\n      {\n        from: \"assistant\",\n        content: \"\",\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date()\n      },\n      newUserMessageId\n    );\n    messagesForPrompt = buildSubtree(conv, newUserMessageId);\n  }\n  const messageToWriteTo = conv.messages.find((message) => message.id === messageToWriteToId);\n  if (!messageToWriteTo) {\n    throw error(500, \"Failed to create message\");\n  }\n  if (messagesForPrompt.length === 0) {\n    throw error(500, \"Failed to create prompt\");\n  }\n  await collections.conversations.updateOne(\n    {\n      _id: convId\n    },\n    {\n      $set: {\n        messages: conv.messages,\n        title: conv.title,\n        updatedAt: /* @__PURE__ */ new Date()\n      }\n    }\n  );\n  let doneStreaming = false;\n  const stream = new ReadableStream({\n    async start(controller) {\n      messageToWriteTo.updates ??= [];\n      function update(newUpdate) {\n        if (newUpdate.type !== \"stream\") {\n          messageToWriteTo?.updates?.push(newUpdate);\n        }\n        if (newUpdate.type === \"stream\" && newUpdate.token === \"\") {\n          return;\n        }\n        controller.enqueue(JSON.stringify(newUpdate) + \"\\n\");\n        if (newUpdate.type === \"finalAnswer\") {\n          controller.enqueue(\" \".repeat(4096));\n        }\n      }\n      update({ type: \"status\", status: \"started\" });\n      const summarizeIfNeeded = (async () => {\n        if (conv.title === \"New Chat\" && conv.messages.length === 3) {\n          try {\n            conv.title = await summarize(conv.messages[1].content) ?? conv.title;\n            update({ type: \"status\", status: \"title\", message: conv.title });\n            await collections.conversations.updateOne(\n              {\n                _id: convId\n              },\n              {\n                $set: {\n                  title: conv?.title,\n                  updatedAt: /* @__PURE__ */ new Date()\n                }\n              }\n            );\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      })();\n      await collections.conversations.updateOne(\n        {\n          _id: convId\n        },\n        {\n          $set: {\n            title: conv.title,\n            updatedAt: /* @__PURE__ */ new Date()\n          }\n        }\n      );\n      if (webSearch && !isContinue && !conv.assistantId) {\n        messageToWriteTo.webSearch = await runWebSearch(conv, messagesForPrompt, update);\n      }\n      const processedMessages = await preprocessMessages(\n        messagesForPrompt,\n        model.multimodal,\n        convId\n      );\n      const previousText = messageToWriteTo.content;\n      try {\n        const endpoint = await model.getEndpoint();\n        for await (const output of await endpoint({\n          messages: processedMessages,\n          preprompt: conv.preprompt,\n          continueMessage: isContinue\n        })) {\n          if (!output.generated_text) {\n            if (!output.token.special) {\n              update({\n                type: \"stream\",\n                token: output.token.text\n              });\n              const date = abortedGenerations.get(convId.toString());\n              if (date && date > promptedAt) {\n                break;\n              }\n              if (!output) {\n                break;\n              }\n              messageToWriteTo.content += output.token.text;\n            }\n          } else {\n            messageToWriteTo.interrupted = !output.token.special;\n            const text = (model.parameters.stop ?? []).reduce((acc, curr) => {\n              if (acc.endsWith(curr)) {\n                messageToWriteTo.interrupted = false;\n                return acc.slice(0, acc.length - curr.length);\n              }\n              return acc;\n            }, output.generated_text.trimEnd());\n            messageToWriteTo.content = previousText + text;\n            messageToWriteTo.updatedAt = /* @__PURE__ */ new Date();\n          }\n        }\n      } catch (e) {\n        update({ type: \"status\", status: \"error\", message: e.message });\n      }\n      await collections.conversations.updateOne(\n        {\n          _id: convId\n        },\n        {\n          $set: {\n            messages: conv.messages,\n            title: conv?.title,\n            updatedAt: /* @__PURE__ */ new Date()\n          }\n        }\n      );\n      doneStreaming = true;\n      update({\n        type: \"finalAnswer\",\n        text: messageToWriteTo.content\n      });\n      await summarizeIfNeeded;\n      controller.close();\n      return;\n    },\n    async cancel() {\n      if (!doneStreaming) {\n        await collections.conversations.updateOne(\n          {\n            _id: convId\n          },\n          {\n            $set: {\n              messages: conv.messages,\n              title: conv.title,\n              updatedAt: /* @__PURE__ */ new Date()\n            }\n          }\n        );\n      }\n    }\n  });\n  return new Response(stream, {\n    headers: {\n      \"Content-Type\": \"text/event-stream\"\n    }\n  });\n}\nasync function DELETE({ locals, params }) {\n  const convId = new ObjectId(params.id);\n  const conv = await collections.conversations.findOne({\n    _id: convId,\n    ...authCondition(locals)\n  });\n  if (!conv) {\n    throw error(404, \"Conversation not found\");\n  }\n  await collections.conversations.deleteOne({ _id: conv._id });\n  return new Response();\n}\nasync function PATCH({ request, locals, params }) {\n  const { title } = z.object({ title: z.string().trim().min(1).max(100) }).parse(await request.json());\n  const convId = new ObjectId(params.id);\n  const conv = await collections.conversations.findOne({\n    _id: convId,\n    ...authCondition(locals)\n  });\n  if (!conv) {\n    throw error(404, \"Conversation not found\");\n  }\n  await collections.conversations.updateOne(\n    {\n      _id: convId\n    },\n    {\n      $set: {\n        title\n      }\n    }\n  );\n  return new Response();\n}\nexport {\n  DELETE,\n  PATCH,\n  POST\n};\n"],"names":[],"mappings":"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"}